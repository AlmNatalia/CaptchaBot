version: '3.9'

services:

  captcha_bot:
          container_name: CaptchaBot
          image: captcha_bot

          build: .

          environment:
              - BOT_TOKEN=${BOT_TOKEN}
              - CHAT_ID_1=${CHAT_ID_1}
              - CHAT_ID_2=${CHAT_ID_2}
              - USERS_DATA_FILE=${USERS_DATA_FILE}

          ports:
              - "443:443"

          volumes:
            - ./logs:/~/CaptchaBot/logs

          restart: on-failure

volumes:
  logs:


# -------------------------------
# Create and start container:
# $ export BOT_TOKEN=<BOT_TOKEN>
# $ export CHAT_ID_1=<CHAT_ID_1>
# $ export CHAT_ID_2=<CHAT_ID_2>
# $ export USERS_DATA_FILE=<USERS_DATA_FILE>
# $ docker-compose up -d
# -------------------------------
# Stop lifted containers:
# $ docker-compose stop
# -------------------------------
# Start stopped containers
# $ docker-compose start
# -------------------------------
# Stop and delete containers and network:
# $ docker-compose down
# -------------------------------
# Remove image:
# $ docker rmi captcha_bot
# -------------------------------
# Clear logs:
# $ sudo rm -rf logs/*
